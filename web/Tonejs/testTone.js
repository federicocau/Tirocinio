/*
function spartitoTamburo(){
var spartito = '{"notes": [{"name": "C#2", "midi": 37, "time": 0, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "C#2", "midi": 37, "time": 0.8, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "C#2", "midi": 37, "time": 1.6, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "C#2", "midi": 37, "time": 2.4, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "D2", "midi": 38, "time": 3.1999999999999997, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "D2", "midi": 38, "time": 3.9999999999999996, "velocity": 0.6299212598425197, "duration": 0.7983333333333333},{"name": "D2", "midi": 38, "time": 4.8, "velocity": 0.6299212598425197, "duration": 0.7983333333333329},{"name": "D2", "midi": 38, "time": 5.6, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 6.4, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 7.200000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333325},{"name": "D2", "midi": 38, "time": 7.400000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333325},{"name": "D2", "midi": 38, "time": 7.600000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333325},{"name": "D2", "midi": 38, "time": 7.800000000000002, "velocity": 0.6299212598425197, "duration": 0.19833333333333325},{"name": "D2", "midi": 38, "time": 8.200000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 8.400000000000002, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 9.600000000000001, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 10.400000000000002, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 10.800000000000002, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 11.200000000000003, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 12.000000000000004, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 12.200000000000005, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 12.400000000000006, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 12.600000000000007, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 12.800000000000008, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 13.600000000000009, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 13.80000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 14.00000000000001, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 14.400000000000011, "velocity": 0.6299212598425197, "duration": 0.7983333333333338},{"name": "D2", "midi": 38, "time": 15.200000000000012, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 15.400000000000013, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 16.000000000000014, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 16.400000000000013, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 16.80000000000001, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 17.20000000000001, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 17.60000000000001, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 18.000000000000007, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 18.400000000000006, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 18.800000000000004, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 19.200000000000003, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 19.6, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 20, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 20.4, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 20.799999999999997, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 21.199999999999996, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 21.599999999999994, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 22.39999999999999, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 23.19999999999999, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 23.999999999999986, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 24.799999999999983, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 25.19999999999998, "velocity": 0.6299212598425197, "duration": 0.39833333333333343},{"name": "D2", "midi": 38, "time": 25.59999999999998, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 26.399999999999977, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 26.79999999999998, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 27.19999999999998, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 27.99999999999998, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 28.39999999999998, "velocity": 0.6299212598425197, "duration": 0.19833333333333414},{"name": "D2", "midi": 38, "time": 28.799999999999983, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 30.39999999999998, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 31.199999999999978, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 31.999999999999975, "velocity": 0.6299212598425197, "duration": 0.7983333333333356},{"name": "D2", "midi": 38, "time": 32.799999999999976, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 33.59999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 34.39999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 35.19999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 36.79999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 37.599999999999966, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 38.39999999999996, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 39.999999999999964, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 41.599999999999966, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 43.19999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 44.79999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 46.39999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 47.99999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332},{"name": "D2", "midi": 38, "time": 49.59999999999997, "velocity": 0.6299212598425197, "duration": 0.798333333333332}]}';
var json = JSON.parse(spartito);
return json;
}
*/
/*
function spartitoTamburo(){
    var xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","Tonejs/testTone.json", true);
    var js;
    xmlhttp.onload = function () {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            handleResponse(xmlhttp.responseText);
        }
    };
    // trasformo da json a js
    //console.log(xmlhttp.responseText);
    //var js = JSON.parse(xmlhttp.responseText);
    // prendo solo le note dall'oggetto

    xmlhttp.send(null);

    function handleResponse(response) {
        js = JSON.parse(response);
        console.log(js);
        return js;
    }

}*/

/*
function foo(callback) {
    httpRequest = c
    httpRequest.onreadystatechange = function () {
        if (httpRequest.readyState === 4) { // request is done
            if (httpRequest.status === 200) { // successfully
                callback(httpRequest.responseText); // we're calling our method
            }
        }
    };
    httpRequest.open('GET', "Tonejs/testTone.json");
    httpRequest.send();
}*/
/*
function spartitoTamburo(){
    
    var js;
    foo(function (result) {
        js = JSON.parse(result);
        console.log(js);
        return js;
    });
    var msg = $.ajax({type: "GET", url: "Tonejs/testTone.json", async: false}).responseText;
    console.log(msg);
    return msg;
}*/
/*
function doRequest(url, callback) {
    var xmlhttp = new XMLHttpRequest(); // create a new request here

    xmlhttp.open("GET", url, true); // for async
    xmlhttp.onreadystatechange=function() {     
        if (xmlhttp.readyState === 4) {
            if (xmlhttp.status === 200) {

                // pass the response to the callback function
                callback(null, xmlhttp.responseText);

            } else {
                // pass the error to the callback function
                callback(xmlhttp.statusText);
            }
        }
    };
    xmlhttp.send(null);
}


function t(){
    
    var r = 
            doRequest('Tonejs/testTone.json', function (err, response) { // pass an anonymous function
                if (err) {
                    return "error";

                } else {
                    //console.log(response);
                    return response;
                }
            });
    console.log(r);
}
t();
*/
/*
var a;
var myVariable = $.ajax({
    url: 'Tonejs/testTone.json',
    dataType: 'json',
    beforeSend: function (xhrObj) {
        xhrObj.setRequestHeader("Accept", "application/json");
    },
    async: true,
    success: function (data) {
        console.log(data.respon);
    }
    complete: function(r){
       //alert(r.responseText);
       return r.responseText;
    }
});

console.log(myVariable);*/

/*
var js;

var a = $.ajax({
    url : 'Tonejs/testTone.json',
    method: 'GET',
    success: function ( result, request ) {
        js = JSON.parse(result);
        stampa(js);
    },
    failure: function ( result, request) { }
    });
    
//console.log(a);
function stampa(parsed){
    console.log(parsed);
    js = parsed;
    console.log(js);
    return js;
}

js = stampa();

console.log(js);
*/


// funziona ma 'false' è deprecato!!!!
function spartitoTamburo(){

    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","Tonejs/testTone.json",false);
    xmlhttp.send();
    // trasformo da json a js
    var js = JSON.parse(xmlhttp.responseText);
    // prendo solo le note dall'oggetto
    //var notes = js.tracks[0].notes;
    var notes = js.tracks[0];
    // prova stampa
    
    return notes;
}


/*
function readBody(xhr) {
    var data;
    if (!xhr.responseType || xhr.responseType === "text") {
        data = xhr.responseText;
    } else if (xhr.responseType === "document") {
        data = xhr.responseXML;
    } else {
        data = xhr.response;
    }
    return data;
}

var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
        console.log(readBody(xhr));
    }
    
    return readBody(xhr);
};
xhr.open('GET', 'Tonejs/testTone.json', true);
xhr.send(null);
*/